<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Testing output</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../-assets/shared.css">
    <style>
      details li {
        margin-top: .325em;
      }
      li.change-at {
        margin-top: 1em;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>
          The <code>output</code> element
        </h1>
        <div class="dates">
          <p>Published: <span>June 24, 2019</span></p>
          <p>Last Updated: <span>July 16, 2020</span></p>
        </div>
        <p>Note: the <code>output</code> element allows for only <a href="https://html.spec.whatwg.org/multipage/dom.html#phrasing-content-2">phrasing content</a> as child elements. The following tests will inject a text string and a single link into each test case's <code>output</code> element.</p>
        <p>
          An additional test file has been created to <a href="inject-text-only.html">test injecting text strings only</a> into <code>output</code> elements that have accessible names.
        </p>

        <p>Note: MSAA and IA2 expose element with "status bar" role.</p>

      </header>

      <div class="important">
        <p>Important note concerning TalkBack:</p>
        <p>
          If <code>output</code> elements are given an accessible name, or contain content by default, TalkBack paired with Chrome will auto-announce the accessible name, any default content, and role (status) of at least one, if not all, instances of <code>output</code>s on initial document load or refresh.
        </p>
      </div>

      <div class="test">
        <h2>Add content to an empty output</h2>
        <div class="test__case">
<button onClick="update()">Update</button>
<output id="aa"></output>
<script>
  var output = document.getElementById('aa');

  var update = function () {
    output.innerHTML = "test content <a href='#'>and link</a>.";
  }
</script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce flattened text string.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element after pressing update button will announce content, but no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2020.2006.12 with Firefox 78.0.2:</b><br>
                    Live announcement of injected content. "and link. test content and link." No role is announced when navigating to output content.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element after pressing update button will announce content, but no role for output element.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    No live announcement made. Navigating to element after pressing update button will announce content, but no role. Element cannot be discovered prior to content injection.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, "status" role, and then repeats non-link content.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>


      <div class="test">
        <h2>Add content to an empty <code>output</code> with <code>aria-label</code></h2>
        <div class="test__case">
<button onClick="updateARIA()">Update</button>
<output id="bb" aria-label="ARIA label"></output>
<script>
  var outputARIA = document.getElementById('bb');

  var updateARIA = function () {
    outputARIA.innerHTML = "test content <a href='#'>and link</a>.";
  }
</script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce flattened text string and accessible name.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of accessible name, followed by content. Navigating to element announces "'accessible name', output".</li>
                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of accessible name, followed by content. Navigating to element announces "'accessible name', status".</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element after pressing update button will announce content, but no accessible name or no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Firefox 67.0.4:</b><br>
                    Live announcement of injected content (see test 1). Can navigate to empty output prior to injected content with virtual cursor. Will announce accessible name and role "status bar". After injecting content, virtual cursor does not stop on/announce accessible name or role of output element.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced, but announces "edit" prior to visible content.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element after pressing update button will announce content, but no accessible name or role. Element cannot be navigated to without injected content.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    Announcement of accessible name ("aria label") but not of injected content. Navigating to element after pressing update button will announce content, but no accessible name or role. Element cannot be discovered prior to content injection.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, accessible name, "status" role, and then repeats non-link content. If update button not pressed, TalkBack can focus <code>output</code> and will announce accessible name and status role.  After injecting content, TalkBack will only navigate to injected content and not announce role.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>


      <div class="test">
        <h2>Add content to an empty output with <code>label</code> association</h2>
        <div class="test__case">
          <button onClick="update2b()">Update</button>
          <label for="bbb">label:</label>
          <output id="bbb"></output>
          <script>
            var output2b = document.getElementById('bbb');

            var update2b = function () {
              output2b.innerHTML = "test content <a href='#'>and link</a>.";
            }
          </script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce flattened text string and accessible name.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element after pressing update button will announce content, but no accessible name or no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2020.2006.12 with Firefox 78.0.2:</b><br>
                    Live announcement of injected content.  Navigating to empty output with virtual cursor announces accessible name from label and "status bar" role. After content is injected no role/accessible name are announced for output when navigated to with virtual cursor. If tabbing to link accessible name of output (but not role) will be announced prior to the link text/role.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element after pressing update button will announce content, but no accessible name or role. Element cannot be navigated to without injected content.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    Announcement of accessible name "label", but not injected content. Can navigate to output prior to content being injected and hear accessible name and "status bar" role. Cannot swipe to output and hear name/role after content is injected.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, accessible name, "status" role, and then repeats non-link content. If update button not pressed, TalkBack can focus <code>output</code> and will announce accessible name and status role.  After injecting content, TalkBack will only navigate to injected content and not announce role.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>


      <div class="test">
        <h2>Add content to an empty output with <code>title</code> attribute</h2>
        <div class="test__case">
<button onClick="updateT()">Update</button>
<output id="ttt" title="title attribute"></output>
<script>
  var outputT = document.getElementById('ttt');

  var updateT = function () {
    outputT.innerHTML = "test content <a href='#'>and link</a>.";
  }
</script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce accessible name and flattened text string.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content after activating the update button. <strong>Before</strong> activating the update button, the <code>title</code> attribute provides the <code>output</code> with an accessible name, and if navigated to, VO will announce "accessible name, output".</li>
                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of accessible name, followed by content. Navigating to element announces "'accessible name', status".</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element before or after pressing update button will announce content, but no accessible name or no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of accessible name and injected content. Cannot navigate to element with virtual cursor prior to content injection. Accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2020.2006.12 with Firefox 78.0.2:</b><br>
                    Similar results to test 3, but with the <code>title</code> providing the accessible name.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to injecting content announces its accessible name, but no role. Navigating after announces no accessible name.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element after pressing update button will announce content, but no accessible name or role. Element cannot be navigated to without injected content.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    Same results as test 3, but with "title attribute" as accessible name.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, accessible name, "status" role, and then repeats non-link content. If update button not pressed, TalkBack can focus <code>output</code> and will announce accessible name and status role.  After injecting content, TalkBack will only navigate to injected content and not announce role.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>


      <div class="test">
        <h2>Update content in an output with default text</h2>
        <div class="test__case">
<button onClick="updateC()">Update</button>
<output id="cc">Test default string</output>
<script>
  var outputC = document.getElementById('cc');

  var updateC = function () {
    outputC.innerHTML = "test content <a href='#'>and link</a>.";
  }
</script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce flattened text string.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content. If quickly navigating to the output after updating, VoiceOver may announce "Default, dimmed" per the original content that was within the <code>output</code> element.</li>
                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element after pressing update button will announce content, but no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of injected content, followed by accessible name. No role is announced when navigating to output content. When navigating to element, accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of injected content, followed by accessible name. No role is announced when navigating to output content. When navigating to element, accessible name only announced if using <kbd>Tab</kbd> key to focus link, accessible name will then announce twice. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2020.2006.12 with Firefox 78.0.2:</b><br>
                    Live announcement made (see test 1 for how content is announced). Navigating to element before or after pressing update button will announce content, but no role.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content. No role is announced when navigating to output content.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element will announce content, but no role.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    No live announcement made. Navigating to element before or after pressing update button will announce content, but no role.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, "status" role, and then repeats non-link content. If update button not pressed, TalkBack can focus <code>output</code> and will announce the initial text string, and then the status role. After injecting content, TalkBack will only navigate to injected content and not announce role.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>


      <div class="test">
        <h2>Update content in an output with default text and accessible name from <code>aria-label</code></h2>
        <div class="test__case">
<button onClick="updateD()">Update</button>
<output id="dd" aria-label="ARIA label">Default text string</output>
<script>
  var outputD = document.getElementById('dd');

  var updateD = function () {
    outputD.innerHTML = "test content <a href='#'>and link</a>.";
  }
</script>
        </div>
        <div class="test__info">
          <div class="test__info__results">
            <details>
              <summary>results</summary>
              <div>
                <p>Expectation: should announce flattened text string and accessible name.</p>
                <ul>
                  <li><b>macOS 10.14.5 VoiceOver with Safari 12.1.1:</b><br>
                    Live announcement of accessible name, followed by content. VoiceOver can navigate to <code>output</code> and will announce "'accessible name', output". VoiceOver can then navigate into the <code>output</code> to announce the default or injected content.</li>

                  <li><b>macOS 10.14.5 VoiceOver with Chrome 75:</b><br>
                    Live announcement of accessible name, followed by content. Navigating to element announces "'accessible name', status". VoiceOver can then navigate into the <code>output</code> to announce the default or injected content.</li>

                  <li class="change-at"><b>JAWS 2019 (june) with IE11:</b><br>
                    No live announcement made. Navigating to element before or after pressing update button will announce content, but no accessible name or no role.</li>
                  <li><b>JAWS 2019 (june) with Edge 77 dev:</b><br>
                    Live announcement of accessible name and injected content. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2019 (june) with Chrome 75:</b><br>
                    Live announcement of accessible name and injected content. No role is announced when navigating to output content.</li>
                  <li><b>JAWS 2020.2006.12 with Firefox 78.0.2:</b><br>
                    Live announcement made (see test 1 for how content is announced). Navigating to element before or after pressing update button will announce content, but no accessible name or role. Tabbing to link after updating content will announce accessible name of output prior to announcing text/role of link.</li>

                  <li class="change-at"><b>NVDA 2019.1.1 with IE11:</b><br>
                    No live announcement made. Navigating to content, no role announced, but announces "edit" prior to visible content.</li>
                  <li><b>NVDA 2019.1.1 with Edge 77 dev:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to, or after injecting content does not announce accessible name or role.</li>
                  <li><b>NVDA 2019.1.1 with Chrome 75:</b><br>
                    Live announcement of injected content, followed by accessible name. Navigating to element prior to, or after injecting content does not announce accessible name or role.</li>
                  <li><b>NVDA 2020.1 with Firefox 78.0.2</b><br>
                    Live announcement of injected content. Navigating to element will announce content, but no accessible name or role.</li>

                  <li class="change-at"><b>Android 10 TalkBack 8.2 with Firefox Beta 79.0.0-beta.5:</b><br>
                    No live announcement made. Navigating to element before injecting content will announce "aria label, status bar" followed by the default content of the output element. After pressing update button, swiping to the output will announce content, but no accessible name or role.</li>
                  <li><b>Android 8.1 TalkBack 7.3 with Chrome 75:</b><br>
                    Live announcement of content, "status" role, and then repeats non-link content. If update button not pressed, TalkBack can focus <code>output</code> and will announce the accessible name, and status role, but not the visible content on screen. After injecting content, TalkBack will navigate to injected content and not announce role, or accessible name.</li>

                  <li class="change-at"><b>iOS 12.3.1 VoiceOver with Safari:</b><br>
                    Live announcement of injected content. No accessible name is announced, nor is a role or accessible name announced when navigating to output content.</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>

      <script src="../-assets/shared.js"></script>
    </div>
  </body>
</html>
